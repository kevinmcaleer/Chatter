// Database Schema for Chatter Application
// Updated to match actual SQLModel implementation

Table user {
  id int [pk, increment]
  username varchar [unique, not null]
  firstname varchar [not null]
  lastname varchar [not null]
  date_of_birth datetime
  email varchar [unique, not null]
  status varchar [not null, default: 'active'] // active or inactive
  hashed_password varchar [not null]
  type int [default: 0] // 0 = regular user, 1 = admin
  created_at timestamp [default: `now()`]
  updated_at timestamp [default: `now()`]
}

table accountlog {
  id int [pk, increment]
  user_id int [not null]
  action varchar [not null] // created, updated, activated, deactivated, deleted
  field_changed varchar // specific field that was changed
  old_value varchar // previous value
  new_value varchar // new value
  changed_by int // user_id of who made the change
  changed_at timestamp [default: `now()`]
  ip_address varchar
  user_agent varchar
}

table like {
  id int [pk, increment]
  url varchar [not null]
  user_id int [not null]
}

table comment {
  id int [pk, increment]
  url varchar [not null]
  content varchar [not null]
  created_at timestamp [default: `now()`]
  user_id int [not null]
}

table projects {
  id int [pk, increment]
  title varchar
  author int
}

table steps {
  id int [pk, increment]
  project_id int
}

table media {
  id int [pk, increment]
  filename varchar
  project_id int
}

// Relationships
Ref: accountlog.user_id > user.id [delete: cascade]
Ref: accountlog.changed_by > user.id [delete: set null]
Ref: like.user_id > user.id [delete: cascade]
Ref: comment.user_id > user.id [delete: cascade]
Ref: projects.author > user.id
Ref: steps.project_id > projects.id
Ref: media.project_id > projects.id
